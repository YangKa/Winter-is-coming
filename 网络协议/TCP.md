## TCP

TCP是传输层协议，它是面向连接的、可靠的、点到点的通讯协议。


### 头部结构

### 拥塞控制 (Congestion control)

指通过窗口机制和其它信息进行控制，计算出最适合当前网络的数据传输速率。


### 流量控制（Flow control）

值通过窗口机制控制发送方的数据发送速度不快于接受方的数据处理速度。

### 保活机制

#### 心跳机制

##### 应用层的心跳

应用层协议都有HeartBeat机制，每隔一段时间，客户端主动向服务器发送一个只包含头部的或包含少量数据的包，来判断连接的可靠性并传输一些必要的数据。

应用层的心跳包是为了告诉对方客户端还活着，请保持连接。这个包一般并不包含数据，只是保留头部。

##### TCP的心跳机制。

TCP协议也有自己的心跳机制，通过控制选项SO_KEEPALIVE来进行开启，
一般用于长连接的保活和断线处理。

`为什么需要心跳`

因为网络环境复杂，中间环节出什么故障是很难知道的，更要命的是有的节点（防火墙）会自动在一定时间将没有数据交互的连接给断开。这就需要心跳来维持长连接进行保活了。

`心跳机制和keepAlive的区别`

TCP keepAlive是为了检测连接的死活，而心跳机制还可以检测双方的存活状态。

### TCP耗时

#### 1.握手

TCP的连接 三次握手
断开连接    四次握手
SSL/TLS     四次握手

#### 2.慢启动（slow start）

为了计算最合适的传输速率。

### TCP和UDP的区别

- TCP是传输控制层协议，面向连接、可靠的、点到点的通信。
- UDP是用户数据报协议，非连接的、不可靠的的通信。
- TCP注重可靠传输，UDP侧重快速传输。
